{% extends "base.html" %}
{% block title %}{{ section.title }}{% endblock title %}
{% block header %}{% endblock header %}
{% block content %}
{# Main Content #}
{{ section.content | safe}}

{# Sponsors #}
<div class="w-100 vstack align-items-center my-5 pb-5">
<h1>Our Sponsors</h1>

<div id="sponsors">
        
{% set spon_sec = get_section(path="sponsors/_index.md") %}

<div id="gold" class="col-lg-10 mx-auto gap-3 d-flex flex-wrap justify-content-evenly align-items-center">
{% for sponsor in spon_sec.pages %}
{% if sponsor.extra.tier == "Gold" %}
<a href="{{ sponsor.extra.link }}">
<img class="white-hover" src="{{ sponsor.extra.logo }}" style="max-height: 125px; max-width: 100%">
</a>
{% endif %}
{% endfor %}
</div>

<div id="silver" class="mt-4 col-lg-10 mx-auto gap-3 d-flex flex-wrap justify-content-evenly align-items-center">
{% for sponsor in spon_sec.pages %}
{% if sponsor.extra.tier == "Silver" %}
<a href="{{ sponsor.extra.link }}">
<img class="white-hover" src="{{ sponsor.extra.logo }}" style="max-height: 100px; max-width: 100%">
</a>
{% endif %}
{% endfor %}
</div>
</div>
</div>

<script>
function equalize_visual_size(elem_id, area) {
    const elem = document.getElementById(elem_id)
    for (let s of elem.children) {
        const h = s.height * Math.sqrt(area / (s.width * s.height)) 
        s.style.height = `${Math.round(h)}px` 
    }
}

window.addEventListener('load', function () {
    equalize_visual_size("gold", 150 * 125);
    equalize_visual_size("silver", 125 * 100);
})
</script>


<div class="blue w-100 vstack align-items-center bg-primary text-white"  data-bs-theme="dark">

{# News #}
{% set news_sec = get_section(path="news/_index.md") %}
{% set pages = news_sec.pages %}
{% if pages %}
<a href="{{ get_url(path="news") }}" class="link-body-emphasis text-decoration-none"><h1>Latest News</h1></a>

<div class="posts p-2 row gap-3 mx-3">
    {% for page in pages %}
      {% if loop.index > 3 %} {% break %} {% endif %}
      <!-- Card for each page -->
      <div class="card w-100 mb-3 col-lg border-0 rounded-4">
        <div class="card-body">
          <h5 class="card-title two-line-clamp">{{ page.title }}</h5>
          {% if page.date %}
          <h6 class="card-subtitle mb-2 text-body-secondary">{{ page.date | date(format="%d %B %Y") }} </h6>
          {% endif %}
          <p class="card-text four-line-clamp m-0">
            <!-- Use summary if exists, otherwise truncate contents -->
            {% if page.summary %}
            {{ page.summary | striptags | truncate(length=125) }}
            {% else %}
            {{ page.content | striptags | truncate(length=125) }}
            {% endif %}
          </p>
          <a class="stretched-link" href="{{ page.permalink }}" class="card-link">Read more >></a>
        </div>
      </div>
    {% endfor %}
    
    {# Events #}
  </div>

{%endif%}

{% endblock content%}
